<!DOCTYPE html>
<html lang="zxx" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>网站管理员首页</title>

    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="templatemo">

    <link href="/manage/css/font-awesome.min.css" rel="stylesheet">
    <link href="/manage/css/bootstrap.min.css" rel="stylesheet">
    <link href="/manage/css/templatemo-style.css" rel="stylesheet">

</head>
<body>

<!-- Left column -->
<div class="templatemo-flex-row">
    <div class="templatemo-sidebar">
        <header class="templatemo-site-header">
<!--            <div class="square"></div>-->
            <h1 th:text="${session.adminNow.getM_realname()}+',您好！'">管理员首页</h1>
        </header>
        <div class="profile-photo-container">
            <img th:src="${session.adminNow.getM_headimg()}" alt="Profile Photo" class="img-responsive">
            <div class="profile-photo-overlay"></div>
        </div>
        <!-- Search box -->
        <form class="templatemo-search-form" role="search">
            <div class="input-group">
                <button type="submit" class="fa fa-search"></button>
                <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
            </div>
        </form>
        <div class="mobile-menu-icon">
            <i class="fa fa-bars"></i>
        </div>
        <nav class="templatemo-left-nav">
            <ul>
                <li><a href="/travel/admin-index" class="active"><i class="fa fa-institution fa-fw"></i>公告信息管理</a></li>
                <li><a href="/travel/admin-travel"><i class="fa fa-table fa-fw"></i>旅游信息管理</a></li>
                <li><a href="/travel/admin-blog"><i class="fa fa-table fa-fw"></i>博客信息管理</a></li>
                <li><a href="/travel/admin-publish"><i class="fa fa-pencil fa-fw"></i>发布旅游景点信息</a></li>
                <li><a href="/travel/admin-nation" ><i class="fa fa-pencil fa-fw"></i>发布民族文化信息</a></li>
                <li><a href="/travel/admin-user"><i class="fa fa-users fa-fw"></i>用户管理</a></li>
                <li><a href="/travel/admin-examine"><i class="fa fa-bookmark fa-fw"></i>审核博客</a></li>
                <li><a href="/travel/admin-prefer" ><i class="fa fa-pencil fa-fw"></i>修改管理员信息</a></li>
                <li><a href="/travel/adminlogout"><i class="fa fa-eject fa-fw"></i>注销</a></li>
            </ul>
        </nav>
    </div>
    <!-- Main content -->
    <div class="templatemo-content col-1 light-gray-bg">
        <div class="templatemo-top-nav-container">
            <div class="row">
                <nav class="templatemo-top-nav col-lg-12 col-md-12">
                    <ul class="text-uppercase">
                        <li><a href="/travel/index">回到网站首页</a></li>
                    </ul>
                </nav>
            </div>
        </div>
        <div class="templatemo-content-container">
            <div class="templatemo-flex-row flex-content-row">
                <div class="templatemo-content-widget white-bg col-2">
                    <i class="fa fa-times"></i>
                    <h2 class="templatemo-inline-block">公 告 信 息</h2><hr>
                    <form id="msgForm" class="templatemo-login-form" method="post">
                        <textarea type="text" class="form-control" name="changeMsg" style="height: 140px;font-size: 20px;" th:text="${mmsgFirst.m_msg}"></textarea>
                    </form>
                    <br/>
                    <p style="color: #2f89fc; font-size: 20px;" id="msg1"></p>
                    <button id="submitBtn" style="float: right" class="templatemo-blue-button">确认发布</button>
                </div>
                <div class="templatemo-content-widget white-bg col-1 text-center">
                    <i class="fa fa-times"></i>
                    <h2 class="text-uppercase">导 语</h2>
                    <h3 class="text-uppercase margin-bottom-10">今天又是阳光明媚的一天</h3>
                    <img src="/manage/images/bicycle.jpg" alt="Bicycle" class="img-circle img-thumbnail">
                </div>
                <div class="templatemo-content-widget white-bg col-1">
                    <i class="fa fa-times"></i>
                    <h2 class="text-uppercase">统计</h2>
                    <h3 class="text-uppercase">今日流量</h3><hr>
                    <a>网站点击量</a>
                    <div class="progress">
                        <div th:text="${usData1}" class="progress-bar progress-bar-info" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"><p>9586</p></div>
                    </div>
                    <a>用户评论量</a>
                    <div class="progress">
                        <div th:text="${usData2}" class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 50%;"><p>586</p></div>
                    </div>
                    <a>用户注册量</a>
                    <div class="progress">
                        <div th:text="${usData3}" class="progress-bar progress-bar-warning" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100" style="width: 60%;"><p>268</p></div>
                    </div>
                </div>
            </div>
            <div class="templatemo-flex-row flex-content-row">
                <div class="col-1">
                    <div class="templatemo-content-widget white-bg">
                        <i class="fa fa-times"></i>
                        <div class="media">
                            <div class="media-left">
                                <a href="#">
                                    <img class="media-object img-circle" th:src="${trave_1.t_picture1}" alt="Sunset" width="60px;" height="60px;">
                                </a>
                            </div>
                            <div class="media-body">
                                <h2 class="media-heading text-uppercase" th:text="${trave_1.t_name}">点击量第一的景点</h2>
                                <p th:text="${#strings.abbreviate(trave_1.t_text1,132)}">内容</p>
                            </div>
                        </div>
                    </div>
                    <div class="templatemo-content-widget white-bg">
                        <i class="fa fa-times"></i>
                        <div class="media">
                            <div class="media-left">
                                <a href="#">
                                    <img class="media-object img-circle" th:src="${trave_2.t_picture1}" alt="Sunset" width="60px;" height="60px;">
                                </a>
                            </div>
                            <div class="media-body">
                                <h2 class="media-heading text-uppercase" th:text="${trave_2.t_name}">点击量第二的景点</h2>
                                <p th:text="${#strings.abbreviate(trave_2.t_text1,132)}">内容</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-1">
                    <div class="templatemo-content-widget white-bg">
                        <i class="fa fa-times"></i>
                        <div class="media">
                            <div class="media-left">
                                <a href="#">
                                    <img class="media-object img-circle" th:src="${blog_1.b_picture1}" alt="Sunset" width="60px;" height="60px;">
                                </a>
                            </div>
                            <div class="media-body">
                                <h2 class="media-heading text-uppercase" th:text="${blog_1.b_title}">点击量第一的博客</h2>
                                <p th:text="${#strings.abbreviate(blog_1.b_text1,132)}">内容</p>
                            </div>
                        </div>
                    </div>
                    <div class="templatemo-content-widget white-bg">
                        <i class="fa fa-times"></i>
                        <div class="media">
                            <div class="media-left">
                                <a href="#">
                                    <img class="media-object img-circle" th:src="${blog_2.b_picture1}" alt="Sunset" width="60px;" height="60px;">
                                </a>
                            </div>
                            <div class="media-body">
                                <h2 class="media-heading text-uppercase" th:text="${blog_2.b_title}">点击量第二的博客</h2>
                                <p th:text="${#strings.abbreviate(blog_2.b_text1,132)}">内容</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div> <!-- Second row ends -->
            <div class="templatemo-flex-row flex-content-row">
                <div class="col-1">
                    <div class="panel panel-default templatemo-content-widget white-bg no-padding templatemo-overflow-hidden">
                        <i class="fa fa-times"></i>
                        <div class="panel-heading templatemo-position-relative"><h2 class="text-uppercase">今日推荐景点</h2></div>
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered">
                                <thead>
                                <tr>
                                    <td>ID</td>
                                    <td>标题</td>
                                    <td>城市</td>
                                    <td>点击量</td>
                                    <td>操作</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="eachTrave : ${mmsgSecond}">
                                    <td th:text="${eachTrave.m_mid}">1.</td>
                                    <td><a th:text="${eachTrave.m_title}" th:href="@{'/travel/mainsingle?trave_id=' + ${eachTrave.m_mid}}" target="_blank"  ></a></td>
                                    <td th:text="${eachTrave.m_mark}">John</td>
                                    <td th:text="${eachTrave.m_clicked}">@jS</td>
                                    <td><a th:href="@{'/travel/deleteMmsg?m_mid=' + ${eachTrave.m_mid}}">删除</a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <form id="traveForm" class="templatemo-login-form" method="post">
                        <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新增的景区ID</label>
                         <input type="text" name="tr_id"  width="50px;" >
                         <button id="traveBtn" class="templatemo-edit-btn">添&nbsp;&nbsp;加</button>
                    </form>
                </div>
                <div class="col-1">
                    <div class="panel panel-default templatemo-content-widget white-bg no-padding templatemo-overflow-hidden">
                        <i class="fa fa-times"></i>
                        <div class="panel-heading templatemo-position-relative"><h2 class="text-uppercase">今日推荐博客</h2></div>
                        <div class="table-responsive">
                            <table class="table table-striped table-bordered">
                                <thead>
                                <tr>
                                    <td>ID</td>
                                    <td>标题</td>
                                    <td>作者</td>
                                    <td>点击量</td>
                                    <td>操作</td>
                                </tr>
                                </thead>
                                <tbody>
                                <tr th:each="eachTrave : ${mmsgThird}">
                                    <td th:text="${eachTrave.m_mid}">1.</td>
                                    <td><a th:text="${eachTrave.m_title}"   th:href="@{'/travel/blogsingle?blog_id=' + ${eachTrave.m_mid}}" target="_blank"  ></a></td>
                                    <td th:text="${eachTrave.m_mark}">John</td>
                                    <td th:text="${eachTrave.m_clicked}">@jS</td>
                                    <td><a th:href="@{'/travel/deleteMmsg?m_mid=' + ${eachTrave.m_mid}}">删除</a></td>
                                </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                    <form id="blogForm" class="templatemo-login-form" method="post">
                        <label>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;新增的博客ID</label>
                        <input type="text" name="blog_id"  width="50px;" >
                        <button id="blogBtn" class="templatemo-edit-btn">添&nbsp;&nbsp;加</button>
                    </form>
                </div>
            </div><!--  The next line  -->
            <div class="templatemo-flex-row flex-content-row templatemo-overflow-hidden"> <!-- overflow hidden for iPad mini landscape view-->
                <div class="col-1 templatemo-overflow-hidden">
                    <div class="templatemo-content-widget white-bg templatemo-overflow-hidden">
                        <i class="fa fa-times"></i>
                        <div class="templatemo-flex-row flex-content-row">
                            <div class="col-1 col-lg-6 col-md-12">
                                <h2 class="text-center">用 户 提 问<span class="badge">new</span></h2>
                                <div id="pie_chart_div" class="templatemo-chart">
                                    <br>
                                    <div th:each="useEach : ${userAsk}">
                                        <h2 align="center" th:text="${useEach.m_title}+' : '+${useEach.m_msg}">展示数据</h2>
                                    </div>
                                </div> <!-- Pie chart div -->
                            </div>
                            <div class="col-1 col-lg-6 col-md-12">
                                <h2 class="text-center">管理员回答<span class="badge">new</span></h2>
                                <div id="bar_chart_div" class="templatemo-chart">
                                    <br>
                                    <div th:each="useEach : ${userAsk}">
                                        <h2 align="center" th:text="${useEach.m_mark}">展示数据</h2>
                                    </div>
                                </div> <!-- Bar chart div -->
                            </div>
                        </div>
                    </div>
                    <form action="/travel/adminAnswer">
                        <input type="text" style="height: 36px; width: 500px;" name="answerontent">
                        <input type="submit" class="templatemo-blue-button" value="回答"></input>
                    </form>
                </div>
            </div>
            <footer class="text-right">
                <p>Copyright &copy; 2020 Company Name
                    | Designed by <a href="http://www.templatemo.com" target="_parent">Chao</a></p>
            </footer>
        </div>
    </div>
</div>

<!-- JS -->
<script src="/manage/js/jquery-1.11.2.min.js"></script>      <!-- jQuery -->
<script src="/manage/js/jquery-migrate-1.2.1.min.js"></script> <!--  jQuery Migrate Plugin -->
<script>
    /* Google Chart
    -------------------------------------------------------------------*/
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function drawChart() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Topping');
        data.addColumn('number', 'Slices');
        data.addRows([
            ['Mushrooms', 3],
            ['Onions', 1],
            ['Olives', 1],
            ['Zucchini', 1],
            ['Pepperoni', 2]
        ]);

        // Set chart options
        var options = {'title':'How Much Pizza I Ate Last Night'};

        // Instantiate and draw our chart, passing in some options.
        var pieChart = new google.visualization.PieChart(document.getElementById('pie_chart_div'));
        pieChart.draw(data, options);

        var barChart = new google.visualization.BarChart(document.getElementById('bar_chart_div'));
        barChart.draw(data, options);
    }

    $(document).ready(function(){
        if($.browser.mozilla) {
            //refresh page on browser resize
            // http://www.sitepoint.com/jquery-refresh-page-browser-resize/
            $(window).bind('resize', function(e)
            {
                if (window.RT) clearTimeout(window.RT);
                window.RT = setTimeout(function()
                {
                    this.location.reload(false); /* false to get page from cache */
                }, 200);
            });
        } else {
            $(window).resize(function(){
                drawChart();
            });
        }
    });

</script>

<script type="text/javascript">

    $(function () {

        $("#submitBtn").click(function() {

            var data = $("#msgForm").serialize();
            $.ajax({
                type:"post",
                url:"changeMsg",
                data:data,
                dataType:"json",
                success:function (data) {
                    if("success"==data.type){
                        //刷新页面
                        //window.parent.location.href = "blog";
                        //window.location.reload();
                        document.getElementById("msg1").innerText = "修改成功！"
                    }else {
                        // $.messager.alert("消息提醒", data.msg, "warning");
                        $("#warningMsg").text(data.msg);
                    }
                }
            });
        });



        $("#traveBtn").click(function() {

            var data = $("#traveForm").serialize();
            $.ajax({
                type:"post",
                url:"addTuiTravel",
                data:data,
                dataType:"json",
                success:function (data) {
                    if("success"==data.type){
                        //刷新页面
                        //window.parent.location.href = "blog";
                        window.location.reload();
                    }else {
                        // $.messager.alert("消息提醒", data.msg, "warning");
                        $("#warningMsg").text(data.msg);
                    }
                }
            });
        });



        $("#blogBtn").click(function() {

            var data = $("#blogForm").serialize();
            $.ajax({
                type:"post",
                url:"addTuiBlog",
                data:data,
                dataType:"json",
                success:function (data) {
                    if("success"==data.type){
                        //刷新页面
                        //window.parent.location.href = "blog";
                        window.location.reload();
                    }else {
                        // $.messager.alert("消息提醒", data.msg, "warning");
                        $("#warningMsg").text(data.msg);
                    }
                }
            });
        });


    })
</script>

<script type="text/javascript" src="/manage/js/templatemo-script.js"></script>      <!-- Templatemo Script -->

</body>
</html>